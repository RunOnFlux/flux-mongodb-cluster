server {
    listen 80;
    server_name localhost;

    # Enable JSON responses
    default_type application/json;

    # Mock Flux API endpoint
    location ~ ^/apps/location/(.*)$ {
        root /usr/share/nginx/html;
        try_files /apps/location/$1 /apps/location/$1.json =404;

        # Add CORS headers
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Methods "GET, OPTIONS";
        add_header Access-Control-Allow-Headers "Content-Type";
    }

    # Health check endpoint
    location /health {
        return 200 '{"status": "ok"}';
    }

    # Default response for root
    location / {
        return 200 '{"message": "Flux API Mock Server", "endpoints": ["/apps/location/{appname}", "/health"]}';
    }
}